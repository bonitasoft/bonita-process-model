/**
 * bonita-angularjs-currency-input-mask - AngularJS Multiple pattern currency input mask
 * @version v1.1.7
 * @link https://github.com/bonitasoft/angularjs-currency-input-mask#readme
 * @license MIT
 */
!function(i){"use strict";function d(e){return e.replace(/[^\d-]/g,"").replace(/(?!^-)-/g,"")}function h(e){return e&&e.replace(/\d/g,"")}function a(e){return"-"===e.charAt(0)}function u(e){return"-"+e}function v(i){function n(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function r(e){return e.replace(/(\$)/g,"$$$1")}return{value:function(e){return this._value=e,this},clear:function(){return this._value=d(this._value),this},minimum:function(){if(0<i.decimalSize){if("-"===this._value)return this;var e=a(this._value),t=(this._value=Math.abs(this._value).toString(),RegExp("^(\\d{1,"+i.decimalSize+"})$","g")),n=(r="$1",n=i.decimalSize,new Array(n).concat([r]).join("0"));this._value=this._value.replace(t,n),e&&(this._value=u(this._value))}var r,n;return this},fraction:function(){var e,t;return 0<i.decimalSize&&(e=RegExp("(-?\\d)(?=\\d{"+i.decimalSize+"}$)","g"),t="$1"+i.decimal,this._value=this._value.replace(e,t)),this},ltrim:function(){var e=a(this._value),t=RegExp("^[-]?[0]*(?!"+n(i.decimal)+")","g");return this._value=this._value.replace(t,""),e&&(this._value=u(this._value)),this},group:function(){var e=0<i.decimalSize?n(i.decimal):"$",e=RegExp("(\\d)(?=(\\d{"+i.groupSize+"})+"+e+")","g"),t="$1"+i.group;return this._value=this._value.replace(e,t),this},currency:function(e){var t,n;return e="r"==i.orientation?(t=this.getRightOrientedCurrency(e),n=RegExp("(.)$","g"),"$1"+r(t)):(t=this.getLeftOrientedCurrency(e),n=RegExp("(^-?)(.?)","g"),"$1"+r(t)+"$2"),this._value=this._value.replace(n,e),this},getLeftOrientedCurrency:function(e){return(e||"")+(i.indentation||"")},getRightOrientedCurrency:function(e){return(i.indentation||"")+(e||"")},format:function(e,t){return this.value(e).clear().minimum().fraction().ltrim().group().currency(t).toString()},toString:function(){return this._value}}}function m(e,t){return(+(Math.round(e+"e+"+t)+"e-"+t)).toFixed(t)}i.module("cur.$mask",[]).factory("support",["$locale","$q","$timeout",function(r,e,a){return{config:function(e){var t=r.NUMBER_FORMATS||{},n=r.NUMBER_FORMATS.PATTERNS||{},t={indentation:"",orientation:"l",decimal:t.DECIMAL_SEP||".",group:t.GROUP_SEP||",",decimalSize:n.minFrac||2,groupSize:n.gSize||3};return i.extend({},t,e||{})},currency:function(e){return null!=e?e:r.NUMBER_FORMATS.CURRENCY_SYM||"$"},getCaretPosition:function(r){return e(function(n,e){a(function(){var e,t;document.selection?(e=(t=document.selection.createRange()).text.length,t.moveStart("character",-r.value.length),t=t.text.length-e,n({start:t,end:t+e})):r.selectionStart||"0"==r.selectionStart?n({start:r.selectionStart,end:r.selectionEnd}):n({start:0,end:0})})})},setCaretPosition:function(r,i){return e(function(t,n){a(function(){var e;r.setSelectionRange?(r.setSelectionRange(i,i),t(!0)):r.createTextRange&&((e=r.createTextRange()).collapse(!0),e.moveEnd("character",i),e.moveStart("character",i),e.select(),t(!0)),n(!1)})})},canMoveCaret:function(e){return e.setSelectionRange||e.createTextRange}}}]).directive("maskCurrency",["$locale","support",function(e,g){return{require:"ngModel",scope:{currency:"=maskCurrency",config:"="},link:function(n,c,t,o){var l,s;function f(e,t){return t=h(t),v(s).format(e,t)}function r(e,t){t=h(t);var n,r,i,a,u=null;return e&&(n=f(e,t),i=d(i=n),0<s.decimalSize&&(a=RegExp("(-?\\d)(?=\\d{"+s.decimalSize+"}$)","g"),i=i.replace(a,"$1.")),u=i,n==e?n=void 0:n==l&&(n=n.replace(/[-]?[^\d]/g,""),!/[0]{2,10}/.test(n)&&""!=n||(n="",u=null)),void 0!==n&&(l=n,o.$setViewValue(n),o.$render(),"r"==s.orientation&&(r=n.indexOf(v(s).getRightOrientedCurrency(t)),g.getCaretPosition(c[0]).then(function(e){e.start==e.end&&e.start>r&&g.setCaretPosition(c[0],r)})))),u}function i(e){!isNaN(e)&&t.min?o.$setValidity("min",e>=t.min):o.$setValidity("min",!0)}function a(e){!isNaN(e)&&t.max?o.$setValidity("max",e<=t.max):o.$setValidity("max",!0)}o&&(s=g.config(n.config),n.$watch("currency",function(){r(o.$viewValue,g.currency(n.currency))}),n.$watch("config",function(e){s=g.config(e),g.canMoveCaret(c[0])||(s.orientation="l"),o.$viewValue&&r(o.$viewValue)}),o.$parsers.push(function(e){e=r(e,g.currency(n.currency)),e=parseFloat(e);return i(e),a(e),e}),o.$formatters.push(function(e){var t=e?f(m(e,s.decimalSize),g.currency(n.currency)):null,e=parseFloat(e);return i(e),a(e),t}))}}}]).filter("printCurrency",["support",function(r){return function(e,t,n){n=r.config(n);return e?v(n).format(m(e,n.decimalSize),t):null}}])}(angular);
//# sourceMappingURL=angularjs-currency-input-mask.js.map
